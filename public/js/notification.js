onmessage=function(o){var e=new XMLHttpRequest;switch(e.responseType="json",o.data.name){case"notify_room_message":e.open("GET","/get_notify_data/"+o.data.room),e.onload=function(){var o=e.response;1==o.status&&new Notification("Użytkownik "+o.user+" wysłał wiadomość do pokoju "+o.room)},e.send("_token="+o.data.token);break;case"check_messages":e.open("GET","/get_notify_data"),e.onload=function(){var o=e.response;0!=o.length&&o.forEach((function(o,e){new Notification("Użytkownik "+o.user+" wysłał wiadomość do pokoju "+o.room)}))},e.send("_token="+o.data.token);break;case"notification":new Notification("Hi there :)");break;default:console.error("Unknown message:",o.data.name)}postMessage("Receiver")};